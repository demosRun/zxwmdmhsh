<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <!-- 页面的元信息 -->
    <title>{TAG_14226_TAG}</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no"/>
    <meta name="format-detection" content="telephone=no, email=no"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="white"/>
    <meta name="renderer" content="webkit"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="filetype" content="1"/>
    <meta name="publishedtype" content="1"/>
    <meta name="pagetype" content="2"/>
    <meta name="screen-orientation" content="landscape"/>
    <meta name="x5-orientation" content="landscape"/>
    <meta name="full-screen" content="yes"/>
    <meta name="x5-fullscreen" content="true"/>
    <meta name="browsermode" content="application"/>
    <meta name="x5-page-mode" content="app"/>
    
      <!-- 页面主样式文件 -->
      <link charset="utf-8"  rel="stylesheet" href="./static/css/owo.core.css">
      
    <!-- 附属css文件 -->
    <link rel="stylesheet" href="./static/css/main.css" charset="utf-8">
      
  </head>
  <body>
    
    <!-- 页面[loading]-->
    <div class="loading-box page" template="loading" style="display: none;"><img class="loading" src="https://cunchu.site/ozzx/resource/loadingLogo.png"><div class="loading-bar"><div class="num-bar"></div></div><span class="text">Loading</span><div class="num">0%</div></div>
    <!-- 页面[page1]-->
    <div class="page-1 page" template="page1" style="display: none;"><div id="container" o-tap="next"></div><div class="scale-box"><div class="so so-0"><canvas id="c1"></canvas><img class="so so-1" src="./static/resource/1338.png"><img class="so so-2" src="./static/resource/625.png"><img class="so so-3" src="./static/resource/660.png" o-animation="shrink" o-tap="play"><img class="so so-5" src="./static/resource/1633.png"><div class="so so-6"><img class="so so-7" src="./static/resource/1630.png"></div><div class="so so-gaotie-0"><img class="so so-gaotie-1" src="./static/resource/91.png"><img class="so so-gaotie-2" src="./static/resource/90.png"></div></div></div><div class="video-box"><img class="close-video" src="./static/resource/close.svg" o-tap="skip"><video src=""></video></div></div>
    
<!-- 框架script文件 -->
<script src="./static/js/owo.core.js" type="text/javascript" charset="UTF-8"></script>
<script type="text/javascript" charset="UTF-8">
// 模块 page1 的script代码
infoData = [{
  "id": 886,
  "name": "bg",
  "itemIndex": 45,
  "opacity": 100,
  "visible": true,
  "bounds": {
    "left": 0,
    "top": -0,
    "index": -393,
    "right": 0,
    "bottom": 750,
    "width": 1548,
    "height": 750,
    "relativeLeft": 0,
    "relativeTop": 0,
    "relativeRight": 0,
    "relativeBottom": 0,
    "percentageLeft": 0,
    "percentageRight": 0,
    "percentageTop": 0,
    "percentageBottom": 0,
    "percentageHeight": 100,
    "percentageWidth": 100,
    "fileWeight": 1548,
    "fileHeight": 750
  },
  "typename": "ArtLayer",
  "width": 1548,
  "height": 750,
  "kind": "NORMAL",
  "isBackgroundLayer": false,
  "fileName": "./static/resource/886.png"
}, {
  "id": 1635,
  "name": "草地",
  "itemIndex": 51,
  "opacity": 100,
  "visible": true,
  "bounds": {
    "left": 110,
    "top": 258,
    "index": -497,
    "right": 1453,
    "bottom": 750,
    "width": 1453,
    "height": 408,
    "relativeLeft": 0,
    "relativeTop": 342,
    "relativeRight": 95,
    "relativeBottom": 0,
    "percentageLeft": 0,
    "percentageRight": 6.13,
    "percentageTop": 45.6,
    "percentageBottom": 0,
    "percentageHeight": 54.4,
    "percentageWidth": 93.86,
    "fileWeight": 1453,
    "fileHeight": 408
  },
  "typename": "ArtLayer",
  "width": 1453,
  "height": 408,
  "kind": "NORMAL",
  "isBackgroundLayer": false,
  "fileName": "./static/resource/1635.png"
} // 朝鲜族
];
owo.script = {
  "loading": {
    "data": {
      "imgList": [""]
    },
    "show": function show() {
      var mum = owo.query('.num')[0];
      var numBar = owo.query('.num-bar')[0];
      this.preloadImages(this.data.imgList, function (e) {
        setTimeout(function () {
          owo.go('page1////true');
        }, 500);
      }, function (num) {
        numBar.style.width = num + '%';
        mum.innerHTML = num + '%';
      });
    },
    "preloadImage": function preloadImage(src, successFn) {
      var image = new Image();
      image.src = src;

      image.onload = function () {
        successFn && successFn(src);
      };

      image.onerror = function (error) {
        successFn && successFn(src);
      };
    },
    "preloadImages": function preloadImages(srcs, doneFn, progressFn) {
      var _this = this;

      if (!Array.isArray(srcs)) {
        console.log('第一个参数只能是一个数组');
      } else {
        var allCount = srcs.length;
        var doneCount = 0;
        srcs.forEach(function (srcItem) {
          _this.preloadImage(srcItem, function () {
            doneCount++;
            progressFn && progressFn(Math.ceil(100 * doneCount / allCount));

            if (doneCount === allCount) {
              doneFn && doneFn();
            }
          });
        });
      }
    }
  },
  "page1": {
    "data": {
      "inputValue": "",
      "beishu": 1,
      "shareShow": false,
      "clickObjects": [],
      "playing": false,
      "step": 0,
      "busying": true,
      "nmMusic": null,
      "videoIsPlay": false,
      "nameIsShow": false,
      "dataGroup": [],
      "videoPlaying": false,
      "videoSrc": ""
    },
    "created": function created() {
      var _this2 = this;

      this.init();
      setTimeout(function () {
        update();
      }, 100);
      this.query('.video-box video').addEventListener('ended', function () {
        _this2.skip();
      });
      this.query('.so-gaotie-1').style.left = '-651px';
      this.query('.so-gaotie-1').style.top = '208px';
    },
    "init": function init() {
      var container = document.getElementById('container'); // 设立相机

      camera = new THREE.PerspectiveCamera(75, window.innerWidth > window.innerHeight ? window.innerWidth / window.innerHeight : window.innerHeight / window.innerWidth, 0.1, 2000);
      camera.position.set(0, 0, 90);
      camera.lookAt(0, 0, 0); // 建立一个场景

      scene = new THREE.Scene();
      scene.fog = new THREE.Fog(0xffffff, 300, 1800); // 像素级的渲染，渲染效果更好

      renderer = new THREE.WebGLRenderer({
        // antialias: true,
        depthTest: false
      });
      renderer.setClearColor(0xfffefb, 1.0);
      renderer.setPixelRatio(window.devicePixelRatio);
      if (window.innerWidth > window.innerHeight) renderer.setSize(window.innerWidth, window.innerHeight);else {
        renderer.setSize(window.innerHeight, window.innerWidth);
      }
      container.appendChild(renderer.domElement); // renderer.outputEncoding = THREE.sRGBEncoding;
      // renderer.toneMapping = THREE.ACESFilmicToneMapping;

      var pmremGenerator = new THREE.PMREMGenerator(renderer); // pmremGenerator.compileEquirectangularShader();

      window.addEventListener('resize', this.onWindowResize, false);
      renderer.setAnimationLoop(render); // renderer.sortObjects = true;
      // 添加光线
      // var ambientLight = new THREE.AmbientLight(0xffffff);
      // scene.add(ambientLight);
      // var pointLight = new THREE.PointLight("#ffffff");
      // pointLight.position.set(0,10,0);
      // scene.add(pointLight);
      // 添加控制器
      // controls = new THREE.OrbitControls( camera, container );
      // controls.target.set( 150, -50, 150 );
      // controls.update();

      this.creatMode(infoData, 'main').position.set(-165, 0, 30);

      function render() {
        renderer.render(scene, camera);
      } // this.initThreeClickEvent()

    },
    "creatMode": function creatMode(infoData, groupName) {
      var _this3 = this;

      // 辅助参考线
      // var grid = new THREE.GridHelper(500, 100);
      // grid.rotation.x = 90 / 180 * Math.PI
      // scene.add(grid);
      // console.log(infoData)
      var group = new THREE.Group();
      infoData.forEach(function (element) {
        var bounds = element.bounds;
        new THREE.TextureLoader().load(element.fileName, function (texture) {
          var obgW = bounds.width;
          var obgH = bounds.height;
          var objL = bounds.left;
          var objT = bounds.top; // console.log(element.name)

          texture.minFilter = THREE.LinearFilter; // MeshBasicMaterial SpriteMaterial

          var textObj = new THREE.MeshBasicMaterial({
            map: texture,
            opacity: element.opacity / 100,
            transparent: true,
            color: 0xffffff,
            depthTest: false,
            sizeAttenuation: false
          });
          var logo = new THREE.Sprite(textObj);
          logo.scale.set(element.width, element.height, 0.1);
          logo.name = element.name;
          console.log(element.name);
          if (element.rotationY) logo.rotation.y = element.rotationY;
          if (element.rotationX) logo.rotation.x = element.rotationX;
          logo.updateMatrix();
          logo.position.set(objL, -objT, bounds.index || 0);
          group.add(logo);

          if (element.name.startsWith('click-')) {
            _this3.data.clickObjects.push(logo);
          }
        });
      });
      group.name = groupName;
      scene.add(group);
      this.data.dataGroup[groupName] = group;
      return group;
    },
    "changeValue": function changeValue(item, key, value) {
      value = parseFloat(value) * this.data.beishu;
      var target = scene.getObjectByName(this.data.inputValue);

      if (target) {
        target[item][key] += value;
        console.log({
          left: target.position.x,
          top: -target.position.y,
          index: target.position.z,
          rotationY: target.rotation.y
        });
      }
    },
    "play": function play(ind) {
      var _this4 = this;

      this.data.step++;
      this.$el.classList.add('play');

      switch (this.data.step) {
        case 1:
          if (window.innerWidth / window.innerHeight > 1) {
            this.query('.scale-box').style.left = -window.innerWidth * 1.2 + 'px';
          } else {
            this.query('.scale-box').style.top = -window.innerHeight * 1.2 + 'px';
          }

          var tl = new TimelineMax();
          tl.to(this.data.dataGroup['main'].position, 2, {
            x: -165,
            y: 0,
            z: 866
          }, 0);
          var temp = [{
            "id": 1658,
            "name": "人物",
            "itemIndex": 11,
            "opacity": 100,
            "visible": true,
            "bounds": {
              "left": 1558,
              "top": 602,
              "index": 100,
              "right": 2513,
              "bottom": 960,
              "width": 455,
              "height": 258,
              "relativeLeft": 740,
              "relativeTop": 702,
              "relativeRight": 746,
              "relativeBottom": 331,
              "percentageLeft": 38.12,
              "percentageRight": 38.43,
              "percentageTop": 58.2,
              "percentageBottom": 27.44,
              "percentageHeight": 21.39,
              "percentageWidth": 23.44,
              "fileWeight": 455,
              "fileHeight": 243
            },
            "typename": "ArtLayer",
            "width": 455,
            "height": 258,
            "kind": "NORMAL",
            "isBackgroundLayer": false,
            "fileName": "./static/resource/1658.png"
          }, {
            "id": 109,
            "name": "click鼓",
            "itemIndex": 10,
            "opacity": 100,
            "visible": true,
            "bounds": {
              "left": 1348,
              "top": 651,
              "index": 100,
              "right": 2192,
              "bottom": 901,
              "width": 134,
              "height": 70,
              "relativeLeft": 740,
              "relativeTop": 831,
              "relativeRight": 1067,
              "relativeBottom": 390,
              "percentageLeft": 38.12,
              "percentageRight": 54.97,
              "percentageTop": 68.9,
              "percentageBottom": 32.33,
              "percentageHeight": 5.8,
              "percentageWidth": 6.9,
              "fileWeight": 134,
              "fileHeight": 70
            },
            "typename": "ArtLayer",
            "width": 134,
            "height": 70,
            "kind": "NORMAL",
            "isBackgroundLayer": false,
            "fileName": "./static/resource/109.png"
          }, {
            "id": 17,
            "name": "树",
            "itemIndex": 9,
            "opacity": 100,
            "visible": true,
            "bounds": {
              "left": 1013,
              "top": 517,
              "index": 100,
              "right": 2093,
              "bottom": 972,
              "width": 408,
              "height": 434,
              "relativeLeft": 367,
              "relativeTop": 538,
              "relativeRight": 1166,
              "relativeBottom": 319,
              "percentageLeft": 18.9,
              "percentageRight": 60.07,
              "percentageTop": 44.61,
              "percentageBottom": 26.45,
              "percentageHeight": 35.98,
              "percentageWidth": 21.02,
              "fileWeight": 408,
              "fileHeight": 434
            },
            "typename": "ArtLayer",
            "width": 408,
            "height": 434,
            "kind": "NORMAL",
            "isBackgroundLayer": false,
            "fileName": "./static/resource/17.png"
          }, {
            "id": 11,
            "name": "朝鲜族",
            "itemIndex": 8,
            "opacity": 100,
            "visible": true,
            "bounds": {
              "left": 1483,
              "top": 487,
              "index": 90,
              "right": 2755,
              "bottom": 817,
              "width": 822,
              "height": 250,
              "relativeLeft": 615,
              "relativeTop": 567,
              "relativeRight": 504,
              "relativeBottom": 474,
              "percentageLeft": 31.68,
              "percentageRight": 25.96,
              "percentageTop": 47.01,
              "percentageBottom": 39.3,
              "percentageHeight": 20.72,
              "percentageWidth": 42.34,
              "fileWeight": 817,
              "fileHeight": 249
            },
            "typename": "ArtLayer",
            "width": 822,
            "height": 250,
            "kind": "SMARTOBJECT",
            "isBackgroundLayer": false,
            "fileName": "./static/resource/11.png"
          }, {
            "id": 14,
            "name": "花",
            "itemIndex": 7,
            "opacity": 100,
            "visible": true,
            "bounds": {
              "left": 1569,
              "top": 351,
              "index": 10,
              "right": 2556,
              "bottom": 677,
              "width": 287,
              "height": 226,
              "relativeLeft": 951,
              "relativeTop": 451,
              "relativeRight": 703,
              "relativeBottom": 614,
              "percentageLeft": 48.99,
              "percentageRight": 36.21,
              "percentageTop": 37.39,
              "percentageBottom": 50.91,
              "percentageHeight": 18.73,
              "percentageWidth": 14.78,
              "fileWeight": 283,
              "fileHeight": 226
            },
            "typename": "ArtLayer",
            "width": 287,
            "height": 226,
            "kind": "NORMAL",
            "isBackgroundLayer": false,
            "fileName": "./static/resource/14.png"
          }, {
            "id": 1788,
            "name": "房子",
            "itemIndex": 6,
            "opacity": 100,
            "visible": true,
            "bounds": {
              "left": 1338,
              "top": 438,
              "index": 100,
              "right": 2945,
              "bottom": 700,
              "width": 1506,
              "height": 162,
              "relativeLeft": 121,
              "relativeTop": 538,
              "relativeRight": 314,
              "relativeBottom": 591,
              "percentageLeft": 6.23,
              "percentageRight": 16.17,
              "percentageTop": 44.61,
              "percentageBottom": 49,
              "percentageHeight": 13.43,
              "percentageWidth": 77.58,
              "fileWeight": 1505,
              "fileHeight": 162
            },
            "typename": "ArtLayer",
            "width": 1506,
            "height": 162,
            "kind": "SMARTOBJECT",
            "isBackgroundLayer": false,
            "fileName": "./static/resource/1788.png"
          }, {
            "id": 1765,
            "name": "山 拷贝",
            "itemIndex": 5,
            "opacity": 100,
            "visible": true,
            "bounds": {
              "left": 1487,
              "top": 335,
              "right": 3018,
              "bottom": 695,
              "width": 1531,
              "height": 360,
              "relativeLeft": 169,
              "relativeTop": 335,
              "relativeRight": 241,
              "relativeBottom": 596,
              "percentageLeft": 8.7,
              "percentageRight": 12.41,
              "percentageTop": 27.77,
              "percentageBottom": 49.41,
              "percentageHeight": 29.85,
              "percentageWidth": 78.87,
              "fileWeight": 1531,
              "fileHeight": 359
            },
            "typename": "ArtLayer",
            "width": 1531,
            "height": 360,
            "kind": "NORMAL",
            "isBackgroundLayer": false,
            "fileName": "./static/resource/1765.png"
          }, {
            "id": 1790,
            "name": "路 拷贝 2",
            "itemIndex": 4,
            "opacity": 100,
            "visible": true,
            "bounds": {
              "left": 1318,
              "top": 544,
              "right": 3158,
              "bottom": 1291,
              "width": 1840,
              "height": 654,
              "relativeLeft": 0,
              "relativeTop": 544,
              "relativeRight": 101,
              "relativeBottom": 0,
              "percentageLeft": 0,
              "percentageRight": 5.2,
              "percentageTop": 45.1,
              "percentageBottom": 0,
              "percentageHeight": 61.94,
              "percentageWidth": 94.79,
              "fileWeight": 1840,
              "fileHeight": 654
            },
            "typename": "ArtLayer",
            "width": 1840,
            "height": 747,
            "kind": "SMARTOBJECT",
            "isBackgroundLayer": false,
            "fileName": "./static/resource/1790.png"
          }, {
            "id": 1779,
            "name": "天空",
            "itemIndex": 3,
            "opacity": 100,
            "visible": true,
            "bounds": {
              "left": 1386,
              "top": 0,
              "right": 3259,
              "bottom": 1278,
              "width": 1873,
              "height": 1206,
              "relativeLeft": 68,
              "relativeTop": 0,
              "relativeRight": 0,
              "relativeBottom": 13,
              "percentageLeft": 3.5,
              "percentageRight": 0,
              "percentageTop": 0,
              "percentageBottom": 1.07,
              "percentageHeight": 100,
              "percentageWidth": 96.49,
              "fileWeight": 1860,
              "fileHeight": 703
            },
            "typename": "ArtLayer",
            "width": 1873,
            "height": 1206,
            "kind": "NORMAL",
            "isBackgroundLayer": false,
            "fileName": "./static/resource/1779.png"
          }];
          var chaoxian = this.creatMode(temp, 'chaoxian');
          setTimeout(function () {
            chaoxian.position.set(-1202, 300, -2405);
            chaoxian.rotation.z = 0.2;
            tl.to(chaoxian.rotation, 3, {
              z: 0
            }, 0);
            tl.to(chaoxian.position, 3, {
              y: 350,
              z: -625
            }, 0); // 循环往复的动画

            setTimeout(function () {
              var tm = new TimelineMax({
                repeat: -1,
                yoyo: true,
                repeatDelay: 0
              });
              tm.to(scene.getObjectByName('花').position, 6, {
                y: -385
              });
            }, 1000);
            _this4.data.videoSrc = 'http://cunchu.site/people/video/%E6%9D%91.mp4';
          }, 100);
          console.log(chaoxian);
          break;

        default:
          break;
      }
    },
    "next": function next() {
      var _this5 = this;

      console.log(this.data.videoSrc);

      if (!this.data.videoSrc) {
        return;
      }

      console.log('播放视频!');
      this.query('.video-box video').src = this.data.videoSrc;
      this.query('.video-box').classList.add('play');
      setTimeout(function () {
        _this5.data.videoPlaying = true;

        _this5.query('.video-box video').play();
      }, 1000);
    },
    "skip": function skip() {
      var _this6 = this;

      this.query('.video-box').classList.remove('play');
      setTimeout(function () {
        _this6.data.videoPlaying = false;

        _this6.query('.video-box video').pause();
      }, 1000);
    }
  }
};
</script>

    <script src="./static/js/autoScale.js" type="text/javascript"  charset="UTF-8"></script>
    <script src="http://rmfp.people.com.cn/img/MAIN/2020/08/120400/static/js/three.min.js" type="text/javascript"  charset="UTF-8"></script>
    <script src="./static/js/particle.js" type="text/javascript"  charset="UTF-8"></script>
    <script src="./static/js/main.js" type="text/javascript"  charset="UTF-8"></script>
    <script src="http://tools.people.com.cn/libs/jquery/1.11.1/jquery-1.11.1.min.js" type="text/javascript"  charset="UTF-8"></script>
    <script src="http://rmfp.people.com.cn/img/MAIN/2020/08/120400/static/js/TweenMax.js" type="text/javascript"  charset="UTF-8"></script>

  </body>
</html>